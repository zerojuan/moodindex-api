#!/usr/bin/env node

const AWS = require( 'aws-sdk' );

AWS.config.update({
  endpoint: 'http://localhost:8000',
  region: 'us-east-2'
});


const db = new AWS.DynamoDB.DocumentClient();

function run() {
  console.log( 'Running DB import scripts' );

  // TODO: make this more dynamic
  const dbData = [
    require( '../data/permissions.json' ),
    require( '../data/users.json' ),
    require( '../data/moods.json' )
  ];

  return Promise.all(
    dbData.map( ( data ) => {
      return db.batchWrite( {
        RequestItems: data
      } ).promise();
    } )
  );
}

if ( require.main === module ) {
  run();
}

module.exports = function() {
  run();
}
